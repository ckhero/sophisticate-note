## 重复消费

> [https://zhuanlan.zhihu.com/p/112745985](https://zhuanlan.zhihu.com/p/112745985)
>
> https://blog.csdn.net/qq\_29493353/article/details/88535092

## 消息提交

> * 手动提交
>   * 消息消费后手动提交
> * 自动提交
>
>   * enable.auto.commit 默认值true，表示会周期性的自动提交
>
>   * 默认自动提交间隔5s，提交上次poll的最大偏移量

## 什么情况会导致重复消费?

> 1. 自动提交场景下，客户端意外关闭

## 解决

> 1. 客户端做幂等，比如根据订单状态判断是否被处理了
> 2. 本地记录对应分区的offset

## 数据丢失

> 1. 上次poll了之后数据还没处理完，就被自动提交了 
> 2. 发送过大的数据
> 3. 数据还没同步到从节点就宕机了



