# 乐观锁/悲观锁

## 资料

> [https://blog.csdn.net/qq\_34337272/article/details/81072874](https://blog.csdn.net/qq_34337272/article/details/81072874)

## 悲观锁

> 总是假设最坏的情况，每次都认为有人会修改数据，所以每次都会去加锁。

## 乐观锁

> 每次假设最好的情况。每次都认为不会有人去修改数据。不加锁，更新的时候去判断有没有人修改过 数据

## 实现方案

> 版本号和CAS算法

## 应用场景 

> 乐观锁适合读多写少的场景，冲突少。不加锁减少性能消耗
>
> 悲观锁适合写多的场景。
>
> 因为写多的场景，如果 使用乐观锁。上层服务会不管的去retry，反倒降低了性能

## 乐观锁缺点

> * ABA问题
> * 循环时间长 ，开销大
> * 只能保证一个共享变量的原子性





