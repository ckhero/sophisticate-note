ETCD

## 资料

> [https://zhuanlan.zhihu.com/p/96428375?from\_voters\_page=true](https://zhuanlan.zhihu.com/p/96428375?from_voters_page=true)
>
> [https://segmentfault.com/a/1190000020742981](https://segmentfault.com/a/1190000020742981)

## 简述

> 分布式，靠key-value存储的分布式系统，不仅提供存储系统，还提供配置共享和服务发现
>
> 通过 raft算法报纸一致性，3各节点1故障，5个节点2个故障，一个主节点多个从节点

## 特点

> * 简单：基于HTTP+JSON的API让你用curl就可以轻松使用。
>
> * 安全：可选SSL客户认证机制。
>
> * 快速：每个实例每秒支持一千次写操作。
>
> * 可信：使用Raft算法充分实现了分布式。

## 应用场景

> * 服务发现
> * 消息发布与订阅
> * 负载均衡
> * 分布式通知和x协调
> * 分布式锁，分布式队列
> * 集群选举和leader竞选

## 主节点 选举

> Raft利用Timer来初始化选举流程，率先完成初始化的会给其他节点发送成为主节点的请求。其他节点收到后给他投一票
>
> 如果票数被瓜分，raft启用随机选举延时，重新发起一轮新的选举的时候有些server就无法参加选举

## 写入成功

> * 写请求被主节点处理并且发送给多数节点，就是一个成功的写入。多数节点指 Quorum=N/2+1
>
> * 因此推荐的最少节点数是3，因为3的容错节点是1，如果节点数只有1，2的多数节点指的是1和2不允许出错。
>
> * 奇数节点数优于偶数节点 因为6和5的容错节点数都是2，



