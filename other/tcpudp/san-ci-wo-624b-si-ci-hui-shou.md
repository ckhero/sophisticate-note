# 三次握手/四次挥手

> [https://blog.csdn.net/weixin\_32208747/article/details/87842240](https://blog.csdn.net/weixin_32208747/article/details/87842240)
>
> [https://blog.csdn.net/qzcsu/article/details/72861891](https://blog.csdn.net/qzcsu/article/details/72861891)

## 简述

> 第一次握手，发送客户端序列号
>
> 第二次  发送确认码和服务端序列号
>
> 第三次发送确认码

## 为什么要三次

> tcp要提供可靠高效的传输。三次握手主要目的是互相交换原始序列号，两次的话，只交换了客户端的序列号，四次的话没必要

## 异常

> 第一次握手异常，客户端在75秒内会重传
>
> 第二次异常，客户端没收到，服务端会重传ack，syn，超过指定次数后，服务端关闭
>
> ```
>              如果客户端收到了，客户端开始发送数据，服务端不接受这数据，继续发送ack，syn
> ```
>
> 第三次异常，客户端会继续发送ack

## 四次挥手客户端2MSL

> 防止服务端没有接受到客户端的ACK，服务端会重发关闭请求

## 意外断开

> 保活机制，两小时，如果两小时后还没接收到请求，开始嗅探，嗅探失败断开连接



