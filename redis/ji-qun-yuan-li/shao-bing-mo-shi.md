# 哨兵模式

> redis提供哨兵命令，哨兵是一个独立的进程。

## 作用

通过发送命令给服务器。等待redis响应。从而监控多个redis实例的运行状态。

检测到master宕机后，自动切换salve到master。然后以发布订阅的方式通知其他slave修改配置文件。

各个哨兵之间还会互相监控。形成多哨兵模式

故障切换

主观下线 -&gt;客观下线

哨兵1 检测到master不可以，不会马上切换，仅仅是哨兵1认为他下线了，为主观下线。当主观下线到一定量的时候，哨兵之前会进行一次投票（半数原则）选出新的master。然后发布订阅通知各个salve修改配置

哨兵工作

一般情况下回10秒一次向 master salve和其他的哨兵发送info命令，如果主观下线后改为1秒一次

优点

> 主从的有点他都有
>
> 会自动切换master，系统更健壮，高可用

缺点

> 较难支持在线扩容。集群容量到上线后在线扩容很麻烦



