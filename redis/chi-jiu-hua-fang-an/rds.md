# RDB

RDB 指定时间间隔内对你的数据进行快照存储

```
     save 900 10 每900s内产生10条数据则进行快照。或者900s触发快照，因为每个时间段的写是不均衡的
```

save 手动出发会阻塞当前redis服务器，不建议产线使用

bgsave fork一个子进程，由子进程负责持久化过程，因此只会在fork子进程的时候阻塞

同一时间只能存在一个bgsave进程

## 触发

1. 配置 save m n

2. 从节点全量复制，主节点发送rdb文件给从节点完成复制，主节点触发bgsave

3. 执行debug relod

4. 执行shutdown

## 优点

> * 文件紧凑，全量备份。适合灾备和恢复
>
> * 备份阶段 主进程fork一个子进程来处理所有保存工作，主进程不需要任何磁盘io
>
> * 恢复大数据的时候比aof快

## 缺点

> * 备份时间较长，备份期间宕机容易导致数据缺失
> * 无法实现秒级别和实时的数据备份





